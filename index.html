<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Cartero : Mailing Phishing Framework" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Cartero</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/Section9Labs/Cartero">View on GitHub</a>

          <h1 id="project_title">Cartero</h1>
          <h2 id="project_tagline">Mailing Phishing Framework</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/Section9Labs/Cartero/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/Section9Labs/Cartero/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="cartero" class="anchor" href="#cartero"><span class="octicon octicon-link"></span></a>Cartero</h1>

<h3>
<a name="description" class="anchor" href="#description"><span class="octicon octicon-link"></span></a>Description</h3>

<p>A simple Phishing Framework Library with a CLI tool. The project was born out of necessity on projects. Even though there are many projects out there, we were not able to find a suitable solution that gave us both easy of use and customizability.</p>

<p>Cartero is a modular project divided into commands that perform independent tasks (i.e. Mailer, Cloner, Listener, AdminConsole, etc...). In addition each sub-command has options. </p>

<p>For example, if we wanted to clone gmail.com, we simply have to perform the following commands. </p>

<pre lang="shell"><code>❯❯❯ ./cartero Cloner --url https://gmail.com --path /tmp --webserver gmail_com
❯❯❯ ./cartero Listener --webserver /tmp/gmail_com -p 80
Launching mongodb
Puma starting in single mode...
* Version 2.8.2 (ruby 2.1.1-p76), codename: Sir Edmund Percival Hillary
* Min threads: 4, max threads: 16
* Environment: production
* Listening on tcp://0.0.0.0:80
Use Ctrl-C to stop
</code></pre>

<p>Once we have a site up and running we can simply use the Mailer command to send templated emails to our testing victims:</p>

<pre lang="shell"><code>❯❯❯ ./cartero Mailer --data victims.json --server gmail2 --subject "Internal Memo" --htmlbody email_html.html --attachment payload.pdf --from "John Doe &lt;jdoe@company.com&gt;"
Sending victim1@company.com
Sending victim2@company.com
Sending victim3@company.com

</code></pre>

<h3>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h3>

<h4>
<a name="dependencies" class="anchor" href="#dependencies"><span class="octicon octicon-link"></span></a>Dependencies</h4>

<pre lang="shell"><code>❯❯❯ brew install mongodb
</code></pre>

<h4>
<a name="framework" class="anchor" href="#framework"><span class="octicon octicon-link"></span></a>Framework</h4>

<pre lang="shell"><code>❯❯❯ git clone github.com/section9labs/Cartero
❯❯❯ cd Cartero
❯❯❯ gem install bundle
❯❯❯ bundle install
❯❯❯ cd bin
</code></pre>

<h3>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h3>

<h3>
<a name="commands" class="anchor" href="#commands"><span class="octicon octicon-link"></span></a>Commands</h3>

<p>Cartero is a very simple to use CLI.</p>

<pre lang="shell"><code>❯❯❯ ./cartero
Usage: cartero [options]

List of Commands:
    AdminConsole, AdminWeb, Mailer, Cloner, Listener, Servers, Templates

Global options:
        --proxy [HOST:PORT]          Sets TCPSocket Proxy server
    -c, --config [CONFIG_FILE]       Provide a different cartero config file
    -v, --[no-]verbose               Run verbosely
    -p [PORT_1,PORT_2,..,PORT_N],    Global Flag fo Mailer and Webserver ports
        --ports
    -m, --mongodb [HOST:PORT]        Global Flag fo Mailer and Webserver ports
    -d, --debug                      Sets debug flag on/off
        --editor [EDITOR]            Edit Server
        --list-commands              Prints list of commands for bash completion

Common options:
    -h, --help [COMMAND]             Show this message
        --version                    Shows cartero CLI version
</code></pre>

<h3>
<a name="basic-commands" class="anchor" href="#basic-commands"><span class="octicon octicon-link"></span></a>Basic Commands</h3>

<h4>
<a name="cloner" class="anchor" href="#cloner"><span class="octicon octicon-link"></span></a>Cloner</h4>

<p>A simple WebSite Cloner. It allows us to download and convert a website into a Cartero WebServer application.
In this way we can easily customize the website to Harvest Credentials, Server Payloads, or create a fully customized website.</p>

<pre lang="shell"><code>❯❯❯ ./cartero Cloner
Usage: Cartero Cloner [options]
    -U, --url [URL_PATH]             Full Path of site to clone
    -W, --webserver [SERVER_NAME]    Sets WebServer name to use
    -p, --path [PATH]                Sets path to save webserver
    -P, --payload [PAYLOAD_PATH]     Sets payload path
        --useragent [UA_STRING]      Sets user agent for cloning
        --wget                       Use wget to clone url
        --apache                     Generate Apache Proxy conf
    -h, --help                       Show this message
</code></pre>

<p>By default the command users our own internal system to download and convert links to render, but we also support a <em>--wget</em> option that will use wget system command.</p>

<h4>
<a name="listener" class="anchor" href="#listener"><span class="octicon octicon-link"></span></a>Listener</h4>

<p>The listener is the system responsible of running the WebServer created through Cloner or manually. By default we also have a very simple WebServer if none is provided.</p>

<pre lang="shell"><code>❯❯❯ ./cartero Listener
Usage: Cartero Listener [options]
    -i, --ip [1.1.1.1]               Sets IP interface, default is 0.0.0.0
    -p [PORT_1,PORT_2,..,PORT_N],    Sets Email Payload Ports to scan
        --ports
    -s, --ssl                        Run over SSL. [this also requires --sslcert and --sslkey]
    -C, --sslcert [CERT_PATH]        Sets Email Payload Ports to scan
    -K, --sslkey [KEY_PATH]          Sets SSL key to use for Listener.
    -V, --views [VIEWS_FOLDER]       Sets SSL Certificate to use for Listener.
    -P, --public [PUBLIC_FOLDER]     Sets a Sinatra public_folder
    -W [WEBSERVER_FOLDER],           Sets the sinatra full path from cloner.
        --webserver
        --payload [PAYLOAD]          Sets a payload download to serve on /download
        --customapp [CUSTOM_SINATRA] Sets a custom Sinatra::Base WebApp. Important, WebApp name should be camelized of filename
    -h, --help                       Show this message

</code></pre>

<p>The WebServers support ssl keys, different public and view paths. Additionally the servers can also be hosted on multiple ports at the same time and they can be bind to a specific IP address as well.</p>

<h4>
<a name="servers" class="anchor" href="#servers"><span class="octicon octicon-link"></span></a>Servers</h4>

<p>In order to send emails campaigns we need to setup servers. This is a command that would help Cartero to create, store and list servers. All data is stored on .cartero configuration directory.</p>

<pre lang="shell"><code>❯❯❯ ./cartero Servers

Usage: Cartero Servers [options]
    -a, --add [NAME]                 Add Server
    -e, --edit [NAME]                Edit Server
    -d, --delete [NAME]              Edit Server
    -l, --list                       List servers
    -h, --help                       Show this message
</code></pre>

<h4>
<a name="templates" class="anchor" href="#templates"><span class="octicon octicon-link"></span></a>Templates</h4>

<p>Just like Servers, email campaigns also need to send a body or html body. This will allow you to keep track, create, list and edit templates being used for each email. It is worth noting that this are not necessary to use and the Mailer command takes direct path to emails templates as well.</p>

<pre lang="shell"><code>❯❯❯ ./cartero Templates
Usage: Cartero Templates [options]
    -a, --add [NAME]                 Add Template
    -e, --edit [NAME]                Edit Template
    -d, --delete [NAME]              Edit Template
    -l, --list                       List Templates
    -h, --help                       Show this message
</code></pre>

<h4>
<a name="mailer" class="anchor" href="#mailer"><span class="octicon octicon-link"></span></a>Mailer</h4>

<p>This is the main command and component in our Framework. Mailer allows Cartero users to send custom templated emails to one or more email addresses.
Each email can be customized using the powerful erb Template engine, allowing users to create complex programming within the templates and send massive, but yet very targeted emails.
For more information on how to build custom templates, please refer to our Examples.</p>

<pre lang="shell"><code>❯❯❯ ./cartero Mailer
Usage: Cartero Mailer [options]
    -D, --data [DATA_FILE]           File containing template data sets
    -S, --server [SERVER_NAME]       Sets Email server to use
    -s, --subject [EMAIL_SUBJECT]    Sets Email subject
    -f, --from [EMAIL_FROM]          Sets Email from
    -r, --reply-to [EMAIL_REPLY_TO]  Sets Email from
    -b, --body [FILE_PATH]           Sets Email Text Body
    -B, --htmlbody [FILE_PATH]       Sets Email HTML Body
    -c, --charset [CHARSET]          Sets Email charset
    -C [CONTENT_TYPE],               Sets Email content type
        --content-type
    -a [FILE_1,FILE_2,..,FILE_N],    Sets Email Attachments
        --attachment
    -p [PORT_1,PORT_2,..,PORT_N],    Sets Email Payload Ports to scan
        --ports
    -h, --help                       Show this message
</code></pre>

<h4>
<a name="adminweb" class="anchor" href="#adminweb"><span class="octicon octicon-link"></span></a>AdminWeb</h4>

<p>The Admin Web is a simple Web-Application that allows to list information about each Campaign.</p>

<pre lang="shell"><code>❯❯❯ ./cartero AdminConsole
Usage: Cartero AdminConsole [options]
    -i, --ip [1.1.1.1]               Sets IP interface, default is 0.0.0.0
    -p [PORT_1,PORT_2,..,PORT_N],    Sets Email Payload Ports to scan
        --ports
    -s, --ssl                        Run over SSL. [this also requires --sslcert and --sslkey]
    -C, --sslcert [CERT_PATH]        Sets Email Payload Ports to scan
    -K, --sslkey [KEY_PATH]          Sets Email Payload Ports to scan
    -h, --help                       Show this message
</code></pre>

<h3>
<a name="adminconsole" class="anchor" href="#adminconsole"><span class="octicon octicon-link"></span></a>AdminConsole</h3>

<p>The Admin Console is CLI tool that allows to list information about Persons, Campaigns, Hits and Credentials gathered.  </p>

<pre lang="shell"><code>❯❯❯ ./cartero AdminConsole
Usage: Cartero AdminConsole [options]
    -p, --persons [LATEST_N]         Display the list of persons that responded
    -i, --hits [LATEST_N]            Display the list of hits
    -c, --creds [LATEST_N]           Display the list of Credentials
    -a, --all                        Sets Email Payload Ports to scan
    -f, --filter                     flag to search by parameters
        --email [EMAIL]              Display the list of hits
        --campaign [CAMPAIGN]        Display the list of hits
        --ip [IP_ADDRESS]            Display the list of hits
    -h, --help                       Show this message

</code></pre>

<h3>
<a name="building-commands" class="anchor" href="#building-commands"><span class="octicon octicon-link"></span></a>Building Commands</h3>

<p>Commands have a fairly easy infrastructure. Default Framework commands are stored on <em>Cartero/lib/cartero/commands/*.rb</em> and <em>~/.cartero/commands/*.rb</em>.</p>

<div class="highlight highlight-ruby"><pre><span class="k">module</span> <span class="nn">Cartero</span>
<span class="k">module</span> <span class="nn">Commands</span>
<span class="k">class</span> <span class="nc">CommandName</span> <span class="o">&lt;</span> <span class="no">Cartero</span><span class="o">::</span><span class="no">Command</span>
    <span class="k">def</span> <span class="nf">initialize</span>
        <span class="k">super</span> <span class="k">do</span> <span class="o">|</span><span class="n">opts</span><span class="o">|</span>
            <span class="n">opts</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s2">"-x"</span><span class="p">,</span> <span class="s2">"--xoption [DATA_FILE]"</span><span class="p">,</span> <span class="nb">String</span><span class="p">,</span>
            <span class="s2">"Description of command option"</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">data</span><span class="o">|</span>
        <span class="vi">@options</span><span class="o">.</span><span class="n">xoption</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">end</span>
      <span class="n">opts</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s2">"-y"</span><span class="p">,</span> <span class="s2">"--yoption [DATA_FILE]"</span><span class="p">,</span> <span class="nb">String</span><span class="p">,</span>
        <span class="s2">"Description of command option"</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">data</span><span class="o">|</span>
        <span class="vi">@options</span><span class="o">.</span><span class="n">xoption</span> <span class="o">=</span> <span class="n">data</span>
      <span class="k">end</span>
      <span class="c1"># help() option already provided.</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">setup</span>
    <span class="c1"># This will be hooked and run before run().</span>
    <span class="c1"># It is meant as a method so the commands can run everything before that.</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">run</span>
    <span class="c1"># Everything that will run.</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">after</span>
    <span class="c1"># This is the place to run clean-up code.</span>
  <span class="k">end</span>
<span class="k">end</span>
<span class="k">end</span>
<span class="k">end</span>
</pre></div>

<h3>
<a name="mailer-templates" class="anchor" href="#mailer-templates"><span class="octicon octicon-link"></span></a>Mailer Templates</h3>

<p>Emails are simple txt files or limited HTML files, depending on the type of format being used. Cartero allows to build and tempaltes both formats. In order to allow complex templating we use erb ruby gem, also used in many projects like Sinatra, Rails, etc.</p>

<p>Files can be extremely customized given erb allows for programatically edits on run time. Additionally we add an encrypted self[:payload] to each email template that allows Cartero to indentify each specific entity regardless. Last, but not least, this payload is encrypted using a key that is randomly generated and only exists on the Cartero config directory, allowing attackers to keep data secure and away from detection. </p>

<p><strong>SAMPLE DATA FILE</strong></p>

<div class="highlight highlight-json"><pre><span class="p">[{</span>
    <span class="nt">"email"</span><span class="p">:</span> <span class="s2">"johndoe@gmail.com"</span><span class="p">,</span>
    <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"John Doe"</span>
<span class="p">},</span> <span class="p">{</span>
    <span class="nt">"email"</span><span class="p">:</span> <span class="s2">"gh@gmail.com"</span><span class="p">,</span>
    <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"Gas Hill"</span>
<span class="p">},</span> <span class="p">{</span>
    <span class="nt">"email"</span><span class="p">:</span> <span class="s2">"johndoe@hotmail.com"</span><span class="p">,</span>
    <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"John Doe 2"</span>
<span class="p">},</span> <span class="p">{</span>
    <span class="nt">"email"</span><span class="p">:</span> <span class="s2">"janedoe@hotmail.com"</span><span class="p">,</span>
    <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"Jane Doe - Hotmail"</span><span class="p">,</span>
    <span class="nt">"subject"</span><span class="p">:</span> <span class="s2">"Hotmail Test 123"</span>
<span class="p">}]</span>
</pre></div>

<p><strong>HTML SAMPLE TEMPLATE</strong></p>

<div class="highlight highlight-html"><pre><span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;h3&gt;</span> Hello Spear Phishing World <span class="err">&lt;</span>%= self[:name] %&gt;,<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;p&gt;</span> This is an automated email to your email <span class="err">&lt;</span>%= self[:email] %&gt;.<span class="nt">&lt;p&gt;</span>
<span class="err">&lt;</span>% if self[:ports] %&gt;
    <span class="err">&lt;</span>% self[:ports].each do |port| %&gt;
        <span class="nt">&lt;img</span> <span class="na">alt=</span><span class="s">""</span> <span class="na">width=</span><span class="s">"1"</span> <span class="na">height=</span><span class="s">"1"</span> <span class="na">border=</span><span class="s">"0"</span> <span class="na">style=</span><span class="s">"height:1px !important;width:1px !important;border-width:0 !important;margin-top:0 !important;margin-bottom:0 !important;margin-right:0 !important;margin-left:0 !important;padding-top:0 !important;padding-bottom:0 !important;padding-right:0 !important;padding-left:0 !important;"</span> <span class="na">src=</span><span class="s">"http://localhost:&lt;%= port %&gt;/image?key=&lt;%= self[:payload] %&gt;"</span><span class="nt">&gt;</span>
    <span class="err">&lt;</span>% end %&gt;
<span class="err">&lt;</span>% end %&gt;
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>

</pre></div>

<p><strong>TEXT SAMPLE TEMPLATE</strong></p>

<div class="highlight highlight-txt"><pre><span class="err">Hola</span> <span class="err">&lt;%=</span> <span class="err">self[:name]</span> <span class="err">%&gt;,</span>
<span class="err">This</span> <span class="err">email</span> <span class="err">needs</span> <span class="err">to</span> <span class="err">be</span> <span class="err">displayed</span> <span class="err">as</span> <span class="err">HTML.</span>
<span class="err">This</span> <span class="err">is</span> <span class="err">an</span> <span class="err">automated</span> <span class="err">email</span> <span class="err">to</span> <span class="err">your</span> <span class="err">email&lt;%=</span> <span class="err">self[:email]</span> <span class="err">%&gt;.</span>
<span class="err">In</span> <span class="err">addition,</span> <span class="err">this</span> <span class="err">email</span> <span class="err">can</span> <span class="err">also</span> <span class="err">be</span> <span class="err">displayed</span> <span class="err">securely</span>
<span class="err">on</span> <span class="err">http://192.168.1.216:8080/click?key=&lt;%=</span> <span class="err">self[:payload]</span> <span class="err">%&gt;</span>

<span class="err">cheers,</span>

<span class="err">&lt;%=</span> <span class="err">self[:from_name]</span> <span class="err">%&gt;</span>

</pre></div>

<h3>
<a name="servers-1" class="anchor" href="#servers-1"><span class="octicon octicon-link"></span></a>Servers</h3>

<p>Servers can be managed using the Cartero Servers command, which allows to add, edit and delete servers.
Additionally, anyone can easily create them manually and store them in <em>~/.cartero/servers/*.json</em></p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"name"</span><span class="p">:</span> <span class="s2">"gmail"</span><span class="p">,</span>
    <span class="nt">"type"</span><span class="p">:</span> <span class="s2">"smtp"</span><span class="p">,</span>
    <span class="nt">"options"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"address"</span><span class="p">:</span> <span class="s2">"smtp.yourserver.com"</span><span class="p">,</span>
        <span class="nt">"port"</span><span class="p">:</span> <span class="mi">25</span><span class="p">,</span>
        <span class="nt">"user_name"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span>
        <span class="nt">"password"</span><span class="p">:</span> <span class="s2">"password"</span><span class="p">,</span>
        <span class="nt">"authentication"</span><span class="p">:</span> <span class="s2">"plain"</span><span class="p">,</span>
        <span class="nt">"domain"</span><span class="p">:</span> <span class="s2">"localhost.localdomain"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h3>
<a name="authors-and-contributors" class="anchor" href="#authors-and-contributors"><span class="octicon octicon-link"></span></a>Authors and Contributors</h3>

<p><a href="https://github.com/FreedomCoder" class="user-mention">@FreedomCoder</a></p>

<h3>
<a name="support-or-contact" class="anchor" href="#support-or-contact"><span class="octicon octicon-link"></span></a>Support or Contact</h3>

<p><a href="https://github.com/Section9Labs/Cartero/issues">https://github.com/Section9Labs/Cartero/issues</a></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Cartero maintained by <a href="https://github.com/Section9Labs">Section9Labs</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
